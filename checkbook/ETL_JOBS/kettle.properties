# This file was generated by Pentaho Data Integration version 3.2.0.
#
# Here are a few examples of variables to set:
#
# PRODUCTION_SERVER = hercules
# TEST_SERVER = zeus
# DEVELOPMENT_SERVER = thor
#
# Note: lines like these with a # in front of it are comments
#

# START VARIABLES FOR NYC CHECKBOOK
NYC_EMAIL_SERVER=mail.reisys.com
NYC_EMAIL_PORT=25
NYC_EMAIL_FROM=ETLJOB@reisys.com
NYC_EMAIL_TO=treddy@reisys.com 
NYC_EMAIL_CC=treddy@reisys.com

CHECKBOOK_DB_HOST=192.168.3.23
CHECKBOOK_DB_USER=gpadmin
CHECKBOOK_DB_PASS=!!w3lc0mGP
CHECKBOOK_DB_NAME=checkbook

CB_FILES_SOURCE_DIR=/vol2share/NYC_SOURCE_DIR/
CB_FILES_DEST_DIR=/vol2share/NYC_DEST_DIR/
CB_FILES_GPDIST_DIR=/vol2share/NYC_GPFDIST_DIR/
CB_FILES_BACKUP_DIR=/vol2share/NYC_BACKUP_DIR/

NYC_FILES_TO_PROCESS_SQL=SELECT c.load_file_id::int as l_load_file_id,a.data_source_code as l_data_source_code,c.file_name::varchar(500) as l_file_name,(CASE WHEN type_of_feed = 'M' THEN 1 WHEN type_of_feed = 'W' THEN 2 WHEN type_of_feed = 'D' THEN 3 END ) l_file_order, file_timestamp::varchar(50) as l_file_timestamp, b.load_id::int as l_load_id FROM etl.ref_data_source a JOIN etl.etl_data_load b ON a.data_source_code = b.data_source_code  JOIN  etl.etl_data_load_file c ON b.load_id = c.load_id WHERE b.job_id = replace_job_id AND  table_order=1 AND consume_flag='Y' AND pattern_matched_flag = 'Y' ORDER BY a.data_source_order, file_timestamp, 4;

NYC_FILES_STATUS_SQL=SELECT c.data_source_name::varchar(100), b.file_name::varchar(255), b.consume_flag, b.pattern_matched_flag, b.processed_flag FROM etl.etl_data_load a, etl.etl_data_load_file b, (SELECT DISTINCT data_source_code, data_source_name FROM etl.ref_data_source) c  WHERE  a.load_id = b.load_id  AND a.data_source_code = c.data_source_code  AND a.job_id = replace_job_id;

NYC_FILES_LOAD_STATISTICS_SQL=SELECT b.load_file_id, max(b.file_name)::varchar(255) AS data_file_name,sum(CASE WHEN description = 'staging' THEN num_transactions ELSE 0 END) AS total_records_received,sum(CASE WHEN description = 'invalid' THEN num_transactions ELSE 0 END) AS invalid_records FROM etl.etl_data_load_verification a, etl.etl_data_load_file b, etl.etl_data_load c  WHERE a.load_file_id = b.load_file_id AND b.load_id = c.load_id   AND c.job_id = replace_job_id GROUP BY 1 ;


# END VARIABLES FOR NYC CHECKBOOK